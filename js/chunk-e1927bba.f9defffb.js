(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1927bba"],{"159b":function(t,a,e){var s=e("da84"),i=e("fdbc"),o=e("17c2"),r=e("9112");for(var n in i){var l=s[n],c=l&&l.prototype;if(c&&c.forEach!==o)try{r(c,"forEach",o)}catch(d){c.forEach=o}}},"17c2":function(t,a,e){"use strict";var s=e("b727").forEach,i=e("a640"),o=e("ae40"),r=i("forEach"),n=o("forEach");t.exports=r&&n?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,a,e){"use strict";var s=e("23e7"),i=e("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"62b3":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cart pb-3 overflow-hidden"},[0!==t.cartProducts.length?e("div",{staticClass:"container"},[e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-outline-sub noto bold btn-sm rounded-0 mb-3",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.clearAll(a)}}},[t._v("清空購物車")])]),e("div",{staticClass:"row justify-content-center align-items-center align-items-lg-stretch text-white pt-lg-4 pb-lg-4 flex-column-reverse flex-lg-row mb-3"},[e("div",{staticClass:"col-12 col-md-8 col-lg-4"},[e("form",{staticClass:"py-3 py-lg-0 sticky-top"},[e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"mb-1 bold",attrs:{for:"name"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control mb-2",class:i,attrs:{type:"text",id:"name",name:"收件人姓名"},domProps:{value:t.form.name},on:{input:function(a){a.target.composing||t.$set(t.form,"name",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"mb-1 bold",attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control mb-2",class:i,attrs:{type:"email",id:"email",name:"電子郵件"},domProps:{value:t.form.email},on:{input:function(a){a.target.composing||t.$set(t.form,"email",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"mb-1 bold",attrs:{for:"tel"}},[t._v("電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"form-control mb-2",class:i,attrs:{type:"tel",id:"tel",name:"電話號碼"},domProps:{value:t.form.tel},on:{input:function(a){a.target.composing||t.$set(t.form,"tel",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"mb-1 bold",attrs:{for:"address"}},[t._v("地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control mb-2",class:i,attrs:{type:"text",id:"address",name:"地址"},domProps:{value:t.form.address},on:{input:function(a){a.target.composing||t.$set(t.form,"address",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"mb-1 bold",attrs:{for:"payment"}},[t._v("購買方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment,expression:"form.payment"}],staticClass:"form-control mb-2",class:i,attrs:{name:"付款方式",id:"payment"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.form,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),e("option",{attrs:{value:"Credit"}},[t._v("Credit")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"numeric"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,i=a.classes;return[e("label",{staticClass:"mb-1 bold",attrs:{for:"text"}},[t._v("優惠券")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon,expression:"coupon"}],staticClass:"form-control mb-2",class:i,attrs:{type:"text",name:"優惠券編號",placeholder:"輸入9999獲得九折優惠"},domProps:{value:t.coupon},on:{input:function(a){a.target.composing||(t.coupon=a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)}),e("label",{staticClass:"mb-1 bold",attrs:{for:"msgForSeller"}},[t._v("留言給賣家")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control mb-3",attrs:{name:"給賣家的話",id:"msgForSeller",rows:"2"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}}),e("button",{staticClass:"btn btn-main rounded-0",attrs:{type:"submit",disabled:s},on:{click:function(a){return a.preventDefault(),t.sendOrder(a)}}},[t._v(" 送出訂單 ")])]}}],null,!1,2933608340)})],1)]),e("div",{staticClass:"col-12 col-md-8 col-lg-8"},[t._l(t.cartProducts,(function(a){return e("div",{key:a.product.id,staticClass:"cartCard d-flex mb-3"},[e("img",{staticClass:"w-25",attrs:{src:a.product.imageUrl[0],alt:a.product.title}}),e("div",{staticClass:"w-75 bg-gray p-2 p-lg-3 text-black noto bold d-flex flex-column justify-content-between"},[e("div",{staticClass:"mb-2"},[e("h5",{staticClass:"d-flex justify-content-between align-items-center mb-lg-1"},[t._v(" "+t._s(a.product.title)+" "),e("i",{staticClass:"pointer material-icons",on:{click:function(e){return e.preventDefault(),t.deleteCart(a)}}},[t._v("clear")])]),e("p",{staticClass:"text-sub"},[t._v("NT$"+t._s(a.product.price))])]),"調酒"==a.product.category?e("div",{staticClass:"d-flex align-items-center mb-2"},[e("label",{staticClass:"mb-0 mr-1 mr-lg-2 mr-xl-3",attrs:{for:""}},[t._v("酒感輕")]),e("input",{staticClass:"form-control-range mr-1 mr-lg-2 mr-xl-3",attrs:{type:"range",id:"formControlRange",min:"1",max:"7",value:"4"}}),e("label",{staticClass:"mb-0",attrs:{for:""}},[t._v("重")])]):t._e(),"調酒"==a.product.category?e("div",{staticClass:"d-flex align-items-center mb-2"},[e("label",{staticClass:"mb-0 mr-1 mr-lg-2 mr-xl-3",attrs:{for:""}},[t._v("口感酸")]),e("input",{staticClass:"form-control-range mr-1 mr-lg-2 mr-xl-3",attrs:{type:"range",id:"formControlRange",min:"1",max:"7",value:"4"}}),e("label",{staticClass:"mb-0",attrs:{for:""}},[t._v("甜")])]):t._e(),"餐點"==a.product.category?e("div",{staticClass:"d-flex align-items-center mb-2"},[e("label",{staticClass:"mb-0 mr-1 mr-lg-2 mr-xl-3",attrs:{for:""}},[t._v("口味鹹")]),e("input",{staticClass:"form-control-range mr-1 mr-lg-2 mr-xl-3",attrs:{type:"range",id:"formControlRange",min:"1",max:"7",value:"4"}}),e("label",{staticClass:"mb-0",attrs:{for:""}},[t._v("甜")])]):t._e(),"無酒精"==a.product.category?e("div",{staticClass:"mb-2"},[e("input",{staticClass:"form-control-range mr-3 w-100 mb-2",attrs:{type:"range",id:"formControlRange",min:"1",max:"6"}}),t._m(0,!0)]):t._e(),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group-prepend"},[e("button",{staticClass:"btn d-flex align-items-center p-0 pl-1 pr-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editCart("minus",a)}}},[e("span",{staticClass:"material-icons"},[t._v("remove")])])]),e("span",{staticClass:"p-2 pl-3 pr-3"},[t._v(t._s(a.quantity))]),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn d-flex align-items-center p-0 pl-1 pr-1",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.editCart("plus",a)}}},[e("span",{staticClass:"material-icons"},[t._v("add")])])])]),e("h5",{staticClass:"bold"},[t._v("NT$"+t._s(a.quantity*a.product.price))])])])])})),e("h2",{staticClass:"noto text-right text-main bold"},[t._v("Total：NT$"),e("span",{domProps:{textContent:t._s(t.totalPrice)}})])],2)]),e("Mypagination",{attrs:{"inner-pagination":t.pagination},on:{"change-page":t.getCart}})],1):e("div",{staticClass:"pt-3 pt-lg-5"},[t._m(1),e("div",{staticClass:"white-texture py-3 py-lg-5"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("ProductSwiper")],1)])])])]),e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("datalist",{staticClass:"d-flex justify-content-between"},[e("option",{staticClass:"vertical bold p-0"},[t._v("熱")]),e("option",{staticClass:"vertical bold p-0"},[t._v("溫")]),e("option",{staticClass:"vertical bold p-0"},[t._v("去冰")]),e("option",{staticClass:"vertical bold p-0"},[t._v("微冰")]),e("option",{staticClass:"vertical bold p-0"},[t._v("少冰")]),e("option",{staticClass:"vertical bold p-0"},[t._v("正常冰")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h2",{staticClass:"text-white text-center mb-4"},[t._v("購物車是空的"),e("br"),t._v("馬上去點些"),e("span",{staticClass:"text-main"},[t._v("美酒")]),t._v("吧！")])}],o=(e("99af"),e("4160"),e("159b"),{data:function(){return{totalPrice:0,cartProducts:[],pagination:{},isLoading:!1,coupon:"",form:{name:"",email:"",tel:"",address:"",payment:"",message:""}}},mounted:function(){this.getCart()},methods:{getCart:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/shopping?page=").concat(a);this.axios.get(e).then((function(a){t.$bus.$emit("get-cart"),t.cartProducts=a.data.data,t.pagination=a.data.meta.pagination,t.totalPrice=0,a.data.data.forEach((function(a){t.totalPrice+=a.quantity*a.product.price})),t.isLoading=!1})).catch((function(){$(".alert").removeClass("d-none"),t.isLoading=!1}))},deleteCart:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/shopping/").concat(t.product.id);this.axios.delete(e).then((function(t){a.getCart(),a.isLoading=!1})).catch((function(){$(".alert").removeClass("d-none"),a.isLoading=!1}))},clearAll:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/shopping/all/product");this.axios.delete(a).then((function(a){t.getCart(),t.isLoading=!1})).catch((function(){$(".alert").removeClass("d-none"),t.isLoading=!1}))},editCart:function(t,a){var e=this,s={};this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/shopping");switch(t){case"plus":s={product:a.product.id,quantity:a.quantity+1},this.axios.patch(i,s).then((function(t){e.getCart(),e.isLoading=!1})).catch((function(){$(".alert").removeClass("d-none"),e.isLoading=!1}));break;case"minus":if(1!==a.quantity){var o={product:a.product.id,quantity:a.quantity-1};this.axios.patch(i,o).then((function(t){e.getCart(),e.isLoading=!1})).catch((function(){$(".alert").removeClass("d-none"),e.isLoading=!1}))}else this.isLoading=!1;break;default:break}},sendOrder:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/orders");""!==this.coupon&&(this.form.coupon=this.coupon),this.axios.post(a,this.form).then((function(a){t.getCart(),t.form={name:"",email:"",tel:"",address:"",payment:"",message:""},t.coupon="",t.$router.push("/check")})).catch((function(){$(".alert").removeClass("d-none"),t.getCart()}))}}}),r=o,n=e("2877"),l=Object(n["a"])(r,s,i,!1,null,null,null);a["default"]=l.exports},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-e1927bba.f9defffb.js.map