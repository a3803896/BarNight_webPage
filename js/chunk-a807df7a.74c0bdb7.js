(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a807df7a"],{"658f":function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product py-3 pb-5 py-md-4"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row flex-nowrap flex-column flex-lg-row"},[i("div",{staticClass:"col-lg-8"},[i("div",[i("img",{staticClass:"mb-3 mb-lg-0",attrs:{src:t.product.imageUrl[0],alt:t.product.title}})])]),i("div",{staticClass:"col-lg-5 details d-flex align-items-center"},[i("div",{staticClass:"d-flex flex-column rounded bg-white p-3 p-md-32 w-100"},[i("h2",{staticClass:"mb-3 noto"},[t._v(t._s(t.product.title))]),i("p",{staticClass:"h5 noto mb-3"},[t._v("「"+t._s(t.product.description)+"」")]),i("strike",{staticClass:"text-right text-sub noto"},[t._v("原價："+t._s(t.product.origin_price))]),i("span",{staticClass:"text-right h4 noto text-danger mb-4"},[t._v("價格："+t._s(t.product.price)+"元")]),i("div",{staticClass:"d-flex justify-content-between"},[i("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.productNum,expression:"productNum",modifiers:{lazy:!0}}],staticClass:"w-30 noto text-center bg-gray border-0 p-2 px-lg-3 mr-1",attrs:{type:"number",min:"1",id:"numberArr"},domProps:{value:t.productNum},on:{change:function(a){t.productNum=a.target.value}}}),i("button",{staticClass:"btn btn-main w-70 noto",attrs:{type:"button"},on:{click:t.addCart}},[t._v("加入購物車")])])],1)])]),i("div",{staticClass:"row py-5"},[i("div",{staticClass:"col-12"},[i("h5",{staticClass:"text-white mb-3"},[t._v("看看類似的商品：")]),i("div",{staticClass:"d-flex flex-wrap justify-content-between"},t._l(t.tempArr,(function(a){return i("div",{key:a.id,staticClass:"card mb-4",attrs:{"data-category":a.category}},[i("div",{staticClass:"position-relative"},[i("img",{staticClass:"card-img-top pointer",attrs:{src:a.imageUrl[0],alt:a.title},on:{click:function(i){return i.preventDefault(),t.openProduct(a)}}}),i("button",{staticClass:"addCart position-absolute btn btn-outline-main noto rounded-pill d-flex",attrs:{type:"button"},on:{click:function(i){return t.addCart(a)}}},[i("i",{staticClass:"material-icons"},[t._v("shopping_cart")])])]),i("div",{staticClass:"card-body p-3 bg-dark"},[i("a",{staticClass:"card-title text-main h4 bold mb-2 noto",on:{click:function(i){return i.preventDefault(),t.openProduct(a)}}},[t._v(t._s(a.title))]),i("div",[i("span",{staticClass:"h5 mb-0 mr-2 text-white bold"},[t._v("NT$"+t._s(a.price)+"元")]),i("strike",{staticClass:"text-sub bold"},[t._v("NT$"+t._s(a.price)+"元")])],1)])])})),0)])])]),i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1)},o=[],c=(i("99af"),i("4de4"),i("fb6a"),{data:function(){return{products:[],tempArr:[],product:{imageUrl:[]},productNum:1,isLoading:!1}},created:function(){this.getproduct()},watch:{productNum:function(){this.productNum<=0&&(this.productNum=1)}},computed:{},methods:{filterProduct:function(){var t=this,a=this.products.filter((function(a){return a.category===t.product.category}));function i(t,a){var i,s,o=t.slice(0),c=t.length,e=c-a;while(c-- >e)s=Math.floor((c+1)*Math.random()),i=o[s],o[s]=o[c],o[c]=i;return o.slice(e)}this.tempArr=i(a,3)},getproduct:function(){var t=this;this.isLoading=!0,this.axios.all([this.axios.get("".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/product/").concat(this.$route.params.id)),this.axios.get("".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/products"))]).then(this.axios.spread((function(a,i){t.product=a.data.data,t.products=i.data.data,t.filterProduct(),t.isLoading=!1}))).catch((function(){$(".alert").removeClass("d-none"),t.isLoading=!1}))},addCart:function(t){var a=this;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io/api/").concat("c51499a4-290d-4ab0-ac0f-2a0060e72bdf","/ec/shopping"),s={product:t.id||this.$route.params.id,quantity:this.productNum||1};this.axios.post(i,s).then((function(){a.$bus.$emit("get-cart"),a.isLoading=!1})).catch((function(){$(".alert").removeClass("d-none"),a.isLoading=!1}))},openProduct:function(t){this.$router.push("/product/".concat(t.id)),this.getproduct()}}}),e=c,r=i("2877"),n=Object(r["a"])(e,s,o,!1,null,null,null);a["default"]=n.exports},fb6a:function(t,a,i){"use strict";var s=i("23e7"),o=i("861d"),c=i("e8b5"),e=i("23cb"),r=i("50c4"),n=i("fc6a"),d=i("8418"),u=i("b622"),l=i("1dde"),p=i("ae40"),f=l("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),v=[].slice,b=Math.max;s({target:"Array",proto:!0,forced:!f||!h},{slice:function(t,a){var i,s,u,l=n(this),p=r(l.length),f=e(t,p),h=e(void 0===a?p:a,p);if(c(l)&&(i=l.constructor,"function"!=typeof i||i!==Array&&!c(i.prototype)?o(i)&&(i=i[m],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return v.call(l,f,h);for(s=new(void 0===i?Array:i)(b(h-f,0)),u=0;f<h;f++,u++)f in l&&d(s,u,l[f]);return s.length=u,s}})}}]);
//# sourceMappingURL=chunk-a807df7a.74c0bdb7.js.map